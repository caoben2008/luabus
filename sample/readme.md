# 说明

首先,本示例是在 macosx 下编写的,所以这里放置的所有可执行文件都是 macosx 的.  
如果在其他环境下运行,请自行编译对应的版本即可.  

游戏行业进入手游年代后,随着市场需求的演进,各家公司都越来越趋向于采用大区服,大集群架构.  
对于大公司,通过一个集群承载几十万,几百万的峰值在线数已经不足为奇.  
本示例的目的即在于示意如何搭建一个服务集群,在高可用的基础上,还要使开发过程尽可能便捷.  

需要说明的是,这里的'高可用',离'金融级'要求还是差很多的,如果业务有更高要求,还是建议看看 kafka 一类的系统.  
既然有现成的'高可用'方案,那么本'轮子'意义何在呢?可能更多的还是在于'简单'&'实用'.

## 服务进程列表

作为示例,假定集群由如下这些服务构成:  

- router, 数据转发器,与所有服务进程连接,可以同时运行多个,负债均摊.
- dbagent, 数据库接入代理,一般按照哈希访问(比如按照玩家账号哈希).
- gamesvr, 游戏逻辑的核心所在,本例种负载均摊.
- gateway, 登录网关,起负载均衡的作用,在登录时指示客户的去连接指定的 gamesvr.
- mailsvr, 邮件服务器,一般哈希访问,按照玩家账号哈希.
- director, 总控逻辑,作为一些全局状态的控制中心,主从备份模式.
- indexsvr, 全局缓存索引,哈希访问,缓存如名字 ID 映射,玩家基本信息,所在进程等.









